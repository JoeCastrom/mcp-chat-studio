<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MCP Chat - Tool Testing Studio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="header">
      <div class="logo">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          </svg>
        </div>
        <span class="logo-text">MCP Chat</span>
        <span class="logo-badge">Studio</span>
      </div>
      <div class="header-actions">
        <!-- Model Badge -->
        <div
          id="modelBadge"
          class="model-badge"
          onclick="showSettingsModal()"
          title="Click to change LLM settings"
        >
          <span id="modelProvider">ğŸ¦™</span>
          <span id="modelName">llama3.1:8b</span>
        </div>

        <!-- Theme Toggle -->
        <button
          class="btn theme-toggle"
          id="themeToggle"
          onclick="toggleTheme()"
          title="Toggle light/dark theme"
        >
          <span id="themeIcon">ğŸŒ™</span>
        </button>

        <div id="userSection"></div>
        <button class="btn" onclick="showSettingsModal()" title="LLM Settings">âš™ï¸</button>
        <button class="btn" id="toggleSidebar">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"></rect>
            <rect x="14" y="3" width="7" height="7"></rect>
            <rect x="14" y="14" width="7" height="7"></rect>
            <rect x="3" y="14" width="7" height="7"></rect>
          </svg>
          MCP Tools
        </button>
        <button class="btn" id="clearChat">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 6h18"></path>
            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
          </svg>
          Clear
        </button>
        <button class="btn" onclick="showShortcutsHelp()" title="Keyboard Shortcuts (Ctrl+/)">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          ?
        </button>
      </div>
    </header>

    <main class="main">
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <span class="sidebar-title">MCP Servers</span>
          <div style="display: flex; gap: var(--spacing-xs); align-items: center">
            <button class="add-server-btn" onclick="showAddServerModal()" title="Add MCP Server">
              + Add
            </button>
            <button class="btn" onclick="exportConfig()" title="Export Config">ğŸ“¥</button>
            <button class="btn" onclick="importConfigFile()" title="Import Config">ğŸ“¤</button>
            <span class="sidebar-status" id="serverCount">0 connected</span>
          </div>
        </div>

        <!-- Hidden file input for import -->
        <input
          type="file"
          id="configFileInput"
          accept=".yaml,.yml,.json"
          style="display: none"
          onchange="handleConfigFileImport(event)"
        />

        <!-- Tool Search -->
        <div class="tool-search">
          <input
            type="text"
            id="toolSearchInput"
            placeholder="ğŸ” Search tools..."
            oninput="filterTools(this.value)"
          />
          <label class="toggle" style="font-size: 0.75rem; margin-bottom: 4px">
            <input type="checkbox" id="includeRiskyTools" />
            <span class="switch"></span>
            <span>âš ï¸ Include risky tools</span>
          </label>
          <button
            class="test-all-btn"
            id="testAllBtn"
            onclick="testAllTools()"
            title="Test all connected tools"
          >
            ğŸ§ª Test All Tools
          </button>
        </div>

        <div class="sidebar-content" id="mcpServers">
          <div class="empty-state">
            <div class="loading-dots">
              <div class="dot"></div>
              <div class="dot"></div>
              <div class="dot"></div>
            </div>
            Loading servers...
          </div>
        </div>
      </aside>

      <div class="chat-container">
        <!-- Tab Navigation -->
        <div class="tab-nav">
          <button class="tab-btn active" onclick="switchTab('chat')" id="chatTabBtn">
            ğŸ’¬ Chat
          </button>
          <button class="tab-btn" onclick="switchTab('inspector')" id="inspectorTabBtn">
            ğŸ”§ Inspector
          </button>
          <button class="tab-btn" onclick="switchTab('history')" id="historyTabBtn">
            ğŸ“œ History
          </button>
          <button class="tab-btn" onclick="switchTab('scenarios')" id="scenariosTabBtn">
            ğŸ§ª Scenarios
          </button>
        </div>

        <!-- Chat Panel (default) -->
        <div class="content-panel active" id="chatPanel">
          <div class="messages" id="messages">
            <div class="message assistant">
              ğŸ‘‹ Welcome to <strong>MCP Chat Studio</strong>! I'm your AI assistant with MCP tool
              support. Connect to MCP servers using the sidebar to enable powerful tools. Some
              servers may require authentication - click "Login" to connect to secured services.
            </div>
          </div>

          <div class="input-area">
            <div class="input-container">
              <div class="input-wrapper">
                <textarea
                  id="userInput"
                  placeholder="Type your message... (Enter to send, Shift+Enter for new line)"
                  rows="1"
                ></textarea>
              </div>
              <button class="send-btn" id="sendBtn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="22" y1="2" x2="11" y2="13"></line>
                  <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                </svg>
                Send
              </button>
            </div>
            <div class="settings-row">
              <label class="toggle">
                <input type="checkbox" id="useTools" checked />
                <span class="switch"></span>
                <span>Use MCP Tools</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="useStream" checked />
                <span class="switch"></span>
                <span>âš¡ Stream</span>
              </label>
              <!-- System Prompt Selector -->
              <div style="display: flex; align-items: center; gap: 4px;">
                <select id="systemPromptSelect" class="form-select" style="font-size: 0.75rem; padding: 4px 8px; min-width: 120px;" onchange="changeSystemPrompt(this.value)" title="System Prompt Persona">
                  <!-- Options populated by JS -->
                </select>
                <button class="btn" onclick="showPromptManager()" title="Manage Prompts" style="padding: 4px 6px; font-size: 0.7rem;">âœï¸</button>
              </div>
              <div id="selectedToolBadge"></div>
            </div>
          </div>
        </div>

        <!-- Inspector Panel -->
        <div class="content-panel" id="inspectorPanel">
          <div class="inspector-panel">
            <!-- Tool Selector -->
            <div class="inspector-section">
              <h3>ğŸ”§ Select Tool</h3>
              <div class="inspector-toolbar">
                <select
                  class="form-select"
                  id="inspectorServerSelect"
                  onchange="loadInspectorTools()"
                >
                  <option value="">-- Select Server --</option>
                </select>
                <select
                  class="form-select"
                  id="inspectorToolSelect"
                  onchange="generateInspectorForm()"
                >
                  <option value="">-- Select Tool --</option>
                </select>
              </div>
            </div>

            <!-- Input Form -->
            <div class="inspector-section" id="inspectorFormSection" style="display: none">
              <h3>ğŸ“ Input Parameters</h3>
              <div
                id="inspectorToolDescription"
                style="
                  font-size: 0.8rem;
                  color: var(--text-secondary);
                  margin-bottom: var(--spacing-md);
                "
              ></div>
              <div class="inspector-form" id="inspectorForm">
                <!-- Dynamic fields will be generated here -->
              </div>
              <div style="margin-top: var(--spacing-md); display: flex; gap: var(--spacing-sm)">
                <button
                  class="btn primary"
                  onclick="executeInspectorTool()"
                  id="inspectorExecuteBtn"
                >
                  â–¶ï¸ Execute
                </button>
                <button class="btn" onclick="clearInspectorForm()">ğŸ—‘ï¸ Clear</button>
              </div>
            </div>

            <!-- Response Display -->
            <div class="inspector-section" id="inspectorResponseSection" style="display: none">
              <h3>ğŸ“¤ Response</h3>
              <div class="inspector-response-header" id="inspectorResponseHeader">
                <div class="inspector-status" id="inspectorResponseStatus"></div>
                <button
                  class="btn"
                  onclick="copyInspectorResponse()"
                  style="font-size: 0.7rem; padding: 2px 8px"
                >
                  ğŸ“‹ Copy JSON
                </button>
              </div>
              <div class="inspector-response" id="inspectorResponseBody"></div>
            </div>

            <!-- Protocol Log -->
            <div class="inspector-section">
              <h3 style="display: flex; justify-content: space-between; align-items: center">
                <span>ğŸ“œ Protocol Log</span>
                <button
                  class="btn"
                  onclick="clearProtocolLog()"
                  style="font-size: 0.65rem; padding: 2px 6px"
                >
                  ğŸ—‘ï¸ Clear
                </button>
              </h3>
              <div id="protocolLog" style="max-height: 300px; overflow-y: auto; font-size: 0.75rem">
                <div style="color: var(--text-muted); font-style: italic">
                  Execute a tool to see protocol messages...
                </div>
              </div>
            </div>

            <!-- SSE Events Viewer -->
            <div class="inspector-section">
              <h3 style="display: flex; justify-content: space-between; align-items: center">
                <span>ğŸ“¡ SSE Events</span>
                <div style="display: flex; gap: 4px">
                  <button
                    id="sseConnectBtn"
                    class="btn"
                    onclick="toggleSSEViewer()"
                    style="font-size: 0.65rem; padding: 2px 6px"
                  >
                    ğŸ”Œ Connect
                  </button>
                  <button
                    class="btn"
                    onclick="clearSSEEvents()"
                    style="font-size: 0.65rem; padding: 2px 6px"
                  >
                    ğŸ—‘ï¸ Clear
                  </button>
                </div>
              </h3>
              <div
                id="sseStatus"
                style="font-size: 0.7rem; color: var(--text-muted); margin-bottom: 4px"
              >
                Not connected - select an SSE server and click Connect
              </div>
              <div id="sseEvents" style="max-height: 250px; overflow-y: auto; font-size: 0.75rem">
                <div style="color: var(--text-muted); font-style: italic">
                  Connect to an SSE server to see real-time events...
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- History Panel -->
        <div class="content-panel" id="historyPanel">
          <div class="inspector-panel">
            <div class="inspector-section">
              <h3 style="display: flex; justify-content: space-between; align-items: center">
                <span>ğŸ“œ Tool Execution History</span>
                <div style="display: flex; gap: 4px">
                  <button
                    class="btn"
                    onclick="refreshHistoryPanel()"
                    style="font-size: 0.65rem; padding: 2px 6px"
                  >
                    ğŸ”„ Refresh
                  </button>
                  <button
                    class="btn"
                    onclick="exportToolHistory()"
                    style="font-size: 0.65rem; padding: 2px 6px"
                  >
                    ğŸ“¥ Export
                  </button>
                  <button
                    class="btn"
                    onclick="clearToolHistory()"
                    style="font-size: 0.65rem; padding: 2px 6px"
                  >
                    ğŸ—‘ï¸ Clear
                  </button>
                </div>
              </h3>
              <div id="toolHistoryStats" style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 8px">
                No tool executions recorded
              </div>
            </div>
            <div id="toolHistoryList" style="display: flex; flex-direction: column; gap: 8px; overflow-y: auto; max-height: calc(100vh - 280px)">
              <div style="color: var(--text-muted); font-style: italic; text-align: center; padding: 20px">
                Execute tools from the Inspector tab to see history here...
              </div>
            </div>
          </div>
        </div>

        <!-- Scenarios Panel -->
        <div class="content-panel" id="scenariosPanel">
          <div class="inspector-panel">
            <!-- Recording Status -->
            <div class="inspector-section" id="recordingSection">
              <h3 style="display: flex; justify-content: space-between; align-items: center">
                <span>ğŸ¬ Recording</span>
                <div style="display: flex; gap: 4px">
                  <button
                    id="recordBtn"
                    class="btn"
                    onclick="toggleRecording()"
                    style="font-size: 0.65rem; padding: 2px 6px"
                  >
                    ğŸ”´ Start Recording
                  </button>
                </div>
              </h3>
              <div id="recordingStatus" style="font-size: 0.75rem; color: var(--text-muted)">
                Not recording. Click "Start Recording" then execute tools in Inspector.
              </div>
              <div id="recordingSteps" style="display: none; margin-top: 8px; font-size: 0.75rem">
                <div style="font-weight: 500; margin-bottom: 4px">Recorded Steps:</div>
                <div id="recordingStepsList"></div>
              </div>
            </div>
            
            <!-- Saved Scenarios -->
            <div class="inspector-section">
              <h3 style="display: flex; justify-content: space-between; align-items: center">
                <span>ğŸ§ª Saved Scenarios</span>
                <div style="display: flex; gap: 4px">
                  <button
                    class="btn"
                    onclick="refreshScenariosPanel()"
                    style="font-size: 0.65rem; padding: 2px 6px"
                  >
                    ğŸ”„ Refresh
                  </button>
                  <button
                    class="btn"
                    onclick="exportAllScenarios()"
                    style="font-size: 0.65rem; padding: 2px 6px"
                  >
                    ğŸ“¥ Export All
                  </button>
                </div>
              </h3>
              <div id="scenariosStats" style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 8px">
                No scenarios saved
              </div>
            </div>
            <div id="scenariosList" style="display: flex; flex-direction: column; gap: 8px; overflow-y: auto; max-height: calc(100vh - 350px)">
              <div style="color: var(--text-muted); font-style: italic; text-align: center; padding: 20px">
                Record tool executions from Inspector â†’ Save as Scenario â†’ Replay anytime
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Add Server Modal -->
    <div class="modal-overlay" id="addServerModal">
      <div class="modal" style="max-width: 600px">
        <div class="modal-header">
          <h2 class="modal-title">Add MCP Server</h2>
          <button class="modal-close" onclick="hideAddServerModal()">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              style="width: 20px; height: 20px"
            >
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>

        <!-- Server Templates -->
        <div style="margin-bottom: var(--spacing-md)">
          <label class="form-label">ğŸ“¦ Quick Templates</label>
          <div style="display: flex; gap: var(--spacing-sm)">
            <select class="form-select" id="serverTemplate" onchange="applyServerTemplate()" style="flex: 1">
              <option value="">-- Select a template --</option>
              <optgroup label="Official MCP Servers">
                <option value="github">ğŸ™ GitHub (requires token)</option>
                <option value="filesystem">ğŸ“ Filesystem (local access)</option>
                <option value="brave-search">ğŸ” Brave Search (requires API key)</option>
                <option value="sqlite">ğŸ—„ï¸ SQLite (local database)</option>
                <option value="puppeteer">ğŸ­ Puppeteer (browser automation)</option>
              </optgroup>
              <optgroup label="SSE Examples">
                <option value="sse-example">ğŸŒ SSE Server (example URL)</option>
              </optgroup>
              <optgroup id="customTemplatesGroup" label="ğŸ“Œ My Templates" style="display: none">
              </optgroup>
            </select>
            <button type="button" class="btn" onclick="saveAsCustomTemplate()" title="Save current form as template" style="white-space: nowrap">
              ğŸ’¾ Save
            </button>
            <button type="button" class="btn" onclick="manageCustomTemplates()" title="Delete custom templates" style="white-space: nowrap">
              ğŸ—‘ï¸
            </button>
          </div>
          <div class="form-hint">Select a template to auto-fill, save your own ğŸ’¾, or delete ğŸ—‘ï¸</div>
        </div>

        <!-- Import YAML/JSON Button -->
        <div style="margin-bottom: var(--spacing-md); display: flex; gap: var(--spacing-sm)">
          <button type="button" class="btn" onclick="showImportConfigModal()" style="flex: 1">
            ğŸ“‹ Import YAML/JSON
          </button>
        </div>

        <form id="addServerForm" onsubmit="submitAddServer(event)">
          <div class="form-group">
            <label class="form-label">Server Name *</label>
            <input
              type="text"
              class="form-input"
              id="serverName"
              placeholder="my-mcp-server"
              required
              oninput="updateConfigPreview()"
            />
            <div class="form-hint">A unique identifier for this server</div>
          </div>

          <div class="form-group">
            <label class="form-label">Transport *</label>
            <select
              class="form-select"
              id="serverType"
              onchange="
                toggleServerTypeFields();
                updateConfigPreview();
              "
            >
              <option value="stdio">STDIO (spawn local process)</option>
              <option value="sse">SSE (HTTP endpoint)</option>
            </select>
          </div>

          <div id="stdioFields">
            <div class="form-group">
              <label class="form-label">Command *</label>
              <input
                type="text"
                class="form-input"
                id="serverCommand"
                placeholder="python"
                oninput="updateConfigPreview()"
              />
              <div class="form-hint">
                Use python, node, npx, or an absolute path to an executable
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">Arguments</label>
              <textarea
                class="form-input"
                id="serverArgs"
                rows="2"
                placeholder="-m my_module&#10;--port 8080"
                oninput="updateConfigPreview()"
              ></textarea>
              <div class="form-hint">One argument per line. We'll pass them exactly as argv.</div>
            </div>
          </div>

          <div id="sseFields" style="display: none">
            <div class="form-group">
              <label class="form-label">URL *</label>
              <input
                type="url"
                class="form-input"
                id="serverUrl"
                placeholder="http://localhost:8000/sse"
                oninput="updateConfigPreview()"
              />
              <div class="form-hint">The SSE endpoint URL for the MCP server</div>
            </div>
          </div>

          <!-- Environment Variables Section -->
          <div class="form-group">
            <label class="form-label">Environment Variables</label>
            <div id="envVarsContainer">
              <!-- Dynamic rows will be added here -->
            </div>
            <button
              type="button"
              class="btn"
              onclick="addEnvVarRow()"
              style="margin-top: var(--spacing-xs); font-size: 0.8rem"
            >
              + Add Variable
            </button>
            <div class="form-hint">Add API keys, URLs, or other environment variables</div>
          </div>

          <div class="form-group">
            <label class="form-label">Description (optional)</label>
            <input
              type="text"
              class="form-input"
              id="serverDescription"
              placeholder="My custom MCP server"
            />
          </div>

          <!-- Config Preview -->
          <div class="form-group">
            <label
              class="form-label"
              style="display: flex; justify-content: space-between; align-items: center"
            >
              <span>Generated Config Preview</span>
              <button
                type="button"
                class="btn"
                onclick="copyConfigToClipboard()"
                style="font-size: 0.7rem; padding: 2px 8px"
              >
                ğŸ“‹ Copy YAML
              </button>
            </label>
            <pre
              id="configPreview"
              style="
                background: var(--bg-surface);
                border: 1px solid var(--border-default);
                border-radius: var(--radius-md);
                padding: var(--spacing-sm);
                font-size: 0.75rem;
                font-family: 'JetBrains Mono', monospace;
                max-height: 150px;
                overflow-y: auto;
                white-space: pre-wrap;
                color: var(--text-secondary);
              "
            ></pre>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn" onclick="hideAddServerModal()">Cancel</button>
            <button type="submit" class="btn primary" id="addServerSubmitBtn">Add Server</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Import Config Modal -->
    <div class="modal-overlay" id="importConfigModal">
      <div class="modal" style="max-width: 550px">
        <div class="modal-header">
          <h2 class="modal-title">ğŸ“‹ Import Config</h2>
          <button class="modal-close" onclick="hideImportConfigModal()">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              style="width: 20px; height: 20px"
            >
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="form-group">
          <label class="form-label">Paste YAML or JSON config</label>
          <textarea
            class="form-input"
            id="importConfigText"
            rows="10"
            placeholder="command: python
args:
  - -m
  - my_mcp_server
env:
  API_KEY: your-key-here"
          ></textarea>
          <div class="form-hint">
            Supports single server config or full mcpServers object. We'll parse and fill the form.
          </div>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn" onclick="hideImportConfigModal()">Cancel</button>
          <button type="button" class="btn primary" onclick="parseAndImportConfig()">Import</button>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
      <div class="modal">
        <div class="modal-header">
          <h2 class="modal-title">âš™ï¸ LLM Settings</h2>
          <button class="modal-close" onclick="hideSettingsModal()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>

        <form id="settingsForm" onsubmit="saveSettings(event)">
          <div class="form-group">
            <label class="form-label">Provider *</label>
            <select class="form-select" id="llmProvider" onchange="onProviderChange()">
              <option value="ollama">ğŸ¦™ Ollama (Local)</option>
              <option value="openai">ğŸ¤– OpenAI</option>
              <option value="anthropic">ğŸ­ Anthropic Claude</option>
              <option value="gemini">ğŸ’ Google Gemini</option>
              <option value="azure">â˜ï¸ Azure OpenAI</option>
              <option value="groq">âš¡ Groq</option>
              <option value="together">ğŸ¤ Together AI</option>
              <option value="openrouter">ğŸŒ OpenRouter</option>
            </select>
            <div class="form-hint" id="providerHint">Local LLM server - no API key needed</div>
          </div>

          <div class="form-group">
            <label class="form-label">Model *</label>
            <input type="text" class="form-input" id="llmModel" placeholder="llama2" />
            <div class="form-hint">Model name (e.g., llama2, gpt-4, mistral)</div>
          </div>

          <div class="form-group">
            <label class="form-label">Temperature</label>
            <div style="display: flex; align-items: center; gap: var(--spacing-md)">
              <input
                type="range"
                id="llmTemperature"
                min="0"
                max="2"
                step="0.1"
                value="0.7"
                style="flex: 1"
              />
              <span id="tempValue" style="min-width: 40px; text-align: center">0.7</span>
            </div>
            <div class="form-hint">0 = precise, 1 = creative, 2 = very random</div>
          </div>

          <div class="form-group">
            <label class="form-label">Base URL (optional)</label>
            <input
              type="url"
              class="form-input"
              id="llmBaseUrl"
              placeholder="http://localhost:11434/v1"
            />
            <div class="form-hint">Custom API endpoint URL</div>
          </div>

          <div class="form-group" id="apiKeyGroup" style="display: none">
            <label class="form-label">API Key</label>
            <input type="password" class="form-input" id="llmApiKey" placeholder="sk-..." />
            <div class="form-hint">Your OpenAI API key (stored in session only)</div>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn" onclick="hideSettingsModal()">Cancel</button>
            <button type="submit" class="btn primary">Save Settings</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div class="modal-overlay" id="confirmDeleteModal">
      <div class="modal" style="max-width: 400px">
        <div class="modal-header">
          <h2 class="modal-title">ğŸ—‘ï¸ Remove Server</h2>
          <button class="modal-close" onclick="hideConfirmDeleteModal()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <p style="margin: var(--spacing-md) 0; color: var(--text-secondary)">
          Remove server "<span
            id="deleteServerName"
            style="color: var(--text-primary); font-weight: 500"
          ></span
          >"?
        </p>
        <p style="margin: var(--spacing-md) 0; color: var(--text-muted); font-size: 0.875rem">
          This will disconnect and remove the server configuration.
        </p>
        <div class="modal-actions">
          <button type="button" class="btn" onclick="hideConfirmDeleteModal()">Cancel</button>
          <button
            type="button"
            class="btn"
            style="background: var(--danger); color: white"
            onclick="confirmDeleteServer()"
          >
            Delete
          </button>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
